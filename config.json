{
	"name": "Capture Form Save Submit Time",

	"namespace": "MCRI\\CaptureFormSaveSubmitTime",

	"authors": [
		{
			"name": "Jack Ren",
			"email": "jack.ren@mcri.edu.au",
			"institution": "Murdoch Children's Research Institute"
		},
		{
			"name": "Luke Stevens",
			"email": "luke.stevens@mcri.edu.au",
			"institution": "Murdoch Children's Research Institute"
		}
	],

	"description": "This module captures the time when a form or a specific survey page is saved or submitted",

	"permissions": [
			"redcap_save_record"
		],
	"system-settings": [
		{
			"name": "System will send an email from this address if the module fails to capture the time",
			"key": "captime_system_email",
			"type": "text",
			"required": true
		},
		{
			"name": "System will CC the email to this address if the module fails to capture the time",
			"key": "captime_cc_email",
			"type": "text",
			"repeatable": true
		}],
	"project-settings": [
		{
			"name": "Send an email to this address if something goes wrong with capturing the time",
			"key": "captime_email"
		},
		{
			"name": "Settings for each instrument",
			"key": "instrument_settings",
			"type": "sub_settings",
			"repeatable": true,
			"sub_settings": [
				{
					"name": "Select which instrument to add the capture functionality",
					"key": "captime_instrument",
					"required": true,
					"type": "form-list"
				},
				{
					"name": "Select which field to capture the time. Remember to set the date/time validation for this field",
					"key": "captime_field",
					"required": true,
					"type": "field-list"
				},
				{
					"name": "Capture time for Data Entry Form Save",
					"key": "captime_form_save",
					"type": "checkbox"
				},
				{
					"name": "Select time capture setting in survey",
					"key": "captime_survey_setting",
					"required": true,
					"type": "radio",
					"choices": [
						{
							"name": "Capture time for any survey pages",
							"value": "captime_survey_setting_all"
						},
						{
							"name": "Capture time for just the page containing the field",
							"value": "captime_survey_setting_spec"
						}
					]
				},
				{
					"name": "Capture time for Survey Save & Return Later",
					"key": "captime_survey_save",
					"type": "checkbox"
				},
				{
					"name": "Capture time for Survey Next Page/Submit",
					"key": "captime_survey_submit",
					"type": "checkbox"
				},
				{
					"name": "Capture time for Survey Previous Page",
					"key": "captime_survey_prev",
					"type": "checkbox"
				},
				{
					"name": "Capture time only when the survey is submitted with a 'Completed' status",
					"key": "captime_comp",
					"type": "checkbox",
					"branchingLogic": {
						"conditions": [
							{
								"field": "captime_survey_setting",
								"value": "captime_survey_setting_spec"
							},
							{
								"field": "captime_survey_submit",
								"value": "1"
							}
						]
					}
				},
				{
					"name": "Select how often to capture the time",
					"key": "captime_freq",
					"required": true,
					"type": "radio",
					"choices": [
						{
							"name": "Only capture the time upon the first save/submit (i.e. If the field is empty)",
							"value": "captime_freq_first"
						},
						{
							"name": "Always capture the time upon saves/submits",
							"value": "captime_freq_all"
						}
					]
				}
			]
		}],
    "compatibility": {
        "redcap-version-min": "8.0.3"
    }
}
